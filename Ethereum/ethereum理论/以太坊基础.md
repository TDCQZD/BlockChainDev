# 以太坊基础

## 账户（Account）
包含地址，余额和随机数，以及可选的存储和代码的对象。
- 普通账户（EOA），存储和代码均为空
- 合约账户（Contract），包含存储和代码
## 地址（Address）
一般来说，这代表一个EOA或合约，它可以在区块链上接收或发送交易。更具体地说，它是ECDSA 公钥的 keccak 散列的最右边的160位。
## 交易（Transaction）
- 可以发送以太币和信息
- 向合约发送的交易可以调用合约代码，并以信息数据为函数参数
- 向空用户发送信息，可以自动生成以信息为代码块的合约账户
## gas
以太坊用于执行智能合约的虚拟燃料。以太坊虚拟机使用核算机制来衡量gas的消耗量并限制计算资源的消耗。

## 以太坊的货币
以太坊的货币单位称为以太（ether），也可以表示为ETH或符号Ξ。
以太币的发行规则：
### 挖矿前（Pre-mine，Genesis）

2014年7月/8月间，为众筹大约发行了7200万以太币。这些币有的时候被称之为“矿前”。众筹阶段之后，以太币每年的产量基本稳定，被限制不超过7200万的25%
### 挖矿产出（Mining）

- 区块奖励（block reward）
- 叔块奖励（uncle reward）
- 叔块引用奖励（uncle referencing reward）
### 以太币产量未来的变化

以太坊出块机制从工作量证明（PoW）转换为股权证明（PoS）后，以太币的发行会有什么变化尚未有定论。股权证明机制将使用一个称为Casper的协议。在Casper协议下，以太币的发行率将大大低于目前幽灵（GHOST）协议下的发行率。

## 以太坊的挖矿产出

### 区块奖励（Block rewards）
每产生一个新区块就会有一笔固定的奖励给矿工，初始是5个以太币，现在是3个。(从大都会拜占庭开始)
###  叔块奖励（Uncle rewards）
有些区块被挖得稍晚一些，因此不能作为主区块链的组成部分。比特币称这类区块为“孤块”，并且完全舍弃它们。但是，以太币称它们为“叔块”（uncles），并且在之后的区块中，可以引用它们。如果叔块在之后的区块链中作为叔块被引用，每个叔块会为挖矿者产出区块奖励的7/8。这被称之为叔块奖励。
###  叔块引用奖励（Uncle referencing rewards）
矿工每引用一个叔块，可以得到区块奖励的1/32作为奖励（最多引用两个叔块）

这样的一套基于POW的奖励机制，被称为以太坊的“幽灵协议”

## 以太坊区块收入

### 普通区块收入
- 固定奖励（挖矿奖励），每个普通区块都有
- 区块内包含的所有程序的 gas 花费的总和
- 如果普通区块引用了叔块，每引用一个叔块可以得到固定奖励的1/32

### 叔块收入
叔块收入只有一项，就是叔块奖励，计算公式为：
叔块奖励 = ( 叔块高度 + 8 – 引用叔块的区块高度 ) * 普通区块奖励 / 8

## “幽灵”（GHOST）协议
- 以太坊出块时间：设计为12秒(比特币交易广播在12.6秒时达到95%)，实际14~15秒左右
- 快速确认会带来区块的高作废率，由此链的安全性也会降低
- “幽灵”协议：Greedy Heaviest Observed SubTree,  ”GHOST” 
    - 计算工作量证明时，不仅包括当前区块的祖区块，父区块，还要包括祖先块的作废的后代区块（“叔块”），将他们进行综合考虑。
    - 目前的协议要求下探到第七层（最早的简版设计是五层），也就是说，废区块只能以叔区块的身份被其父母的第二代至第七代后辈区块引用，而不能是更远关系的后辈区块。
    - 以太坊付给以“叔区块”身份为新块确认作出贡献的废区块7/8的奖励，把它们纳入计算的“侄子区块”将获得区块奖励的1/32，不过，交易费用不会奖励给叔区块。

##  以太坊和图灵完备
1936年，英国数学家艾伦·图灵（Alan Turing）创建了一个计算机的数学模型，它由一个控制器、一个读写头和一根无限长的工作带组成。纸带起着存储的作用，被分成一个个的小方格（可以看成磁带）；读写头能够读取纸带上的信息，以及将运算结果写进纸带；控制器则负责根据程序对搜集到的信息进行处理。在每个时刻，机器头都要从当前纸带上读入一个方格信息，然后结合自己的内部状态查找程序表，根据程序输出信息到纸带方格上，并转换自己的内部状态，然后进行移动纸带。

如果一个系统可以模拟任何图灵机，它就被定义为“图灵完备”（Turing Complete）的。这种系统称为通用图灵机（UTM）。

以太坊能够在称为以太坊虚拟机的状态机中执行存储程序，同时向内存读取和写入数据，使其成为图灵完备系统，因此成为通用图灵机。考虑到有限存储器的限制，以太坊可以计算任何可由任何图灵机计算的算法。

简单来说，以太坊中支持循环语句，理论上可以运行“无限循环”的程序。

##  去中心化应用

1. 基于以太坊可以创建智能合约（Smart Contract）来构建去中心化应用（Decentralized Application，简称为 DApp）

2. 以太坊的构想是成为 DApps 编程开发的平台

3. DApp至少由以下组成：
-  区块链上的智能合约
-  Web前端用户界面

## 以太坊应用
1. 基于以太坊创建新的加密货币（CryptoCurrency，这种能力是 2017 年各种 ICO 泛滥的技术动因）

2. 基于以太坊创建域名注册系统、博彩系统

3. 基于以太坊开发去中心化的游戏，比如 2017 年底红极一时的以太猫（CryptoKitties，最高单只猫售价高达 80W 美元）

## 代币（Token）

1. 代币（token）也称作通证，本意为“令牌”，代表有所有权的资产、货币、权限等在区块链上的抽象
2.  可替代性通证（fungible token）：指的是基于区块链技术发行的，互相可以替代的，可以接近无限拆分的token
3. 非同质通证（non-fungible token）： 指的是基于区块链技术发行的，唯一的，不可替代的，大多数情况下不可拆分的token，如加密猫（CryptoKitties）
